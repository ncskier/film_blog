{% comment %}
  Input:
    - pageTag: tag for each page
    - previewType: [type] of (default, image, trailer)
{% endcomment %}

<ul class="post-list">

  {% for post in paginator.posts %}

    {% assign onPage = false %}

    {% if include.pageTag %}

      {% comment %} Check if post has a tag matching one of page tags {% endcomment %}
      {% for postTag in post.tags %}

        {% if include.pageTag == postTag %}
          {% assign onPage = true %}
        {% endif %}

      {% endfor %}

    {% else %}

      {% comment %} No page tag {% endcomment %}
      {% assign onPage = true %}

    {% endif %}

    {% if onPage %}
      <li>
        {% include post-preview.html post=post type=include.previewType %}
        {% comment %}
        {% assign date_format = site.minima.date_format | default: "%b %-d, %Y" %}
        <span class="post-meta">{{ post.date | date: date_format }}</span>

        <h2>
          <a class="post-link" href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
        </h2>
        {% endcomment %}
      </li>
    {% endif %}

  {% endfor %}
</ul>

<!-- Pagination links -->
<div class="pagination">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path }}" class="previous">Previous</a>
  {% else %}
    <span class="previous">Previous</span>
  {% endif %}
  <span class="page_number ">Page: {{ paginator.page }} of {{ paginator.total_pages }}</span>
  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path }}" class="next">Next</a>
  {% else %}
    <span class="next ">Next</span>
  {% endif %}
</div>
